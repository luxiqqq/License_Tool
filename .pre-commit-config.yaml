# =============================
# Configurazione pre-commit in locale
# Questo file definisce gli hook che vengono eseguiti automaticamente
# prima dei commit e dei push su Git. Aiuta a mantenere la qualità del codice.
# =============================
default_install_hook_types: [pre-commit, pre-push]

repos:
  - repo: local
    hooks:
      # Pylint: esegue il controllo statico del codice Python ad ogni commit
      # (pre-commit è il comportamento predefinito)
      - id: pylint
        name: pylint
        entry: pylint
        language: system
        types: [python]
        exclude: ^tests/
        args: ["app", "--errors-only"]

      # Pytest: esegue i test automatici SOLO in fase di 'git push'
      - id: pytest
        name: pytest
        entry: pytest
        language: system
        pass_filenames: false
        stages: [pre-push]
        args: ["-k", "not acceptance", "--cov=app", "--cov-fail-under=75"]